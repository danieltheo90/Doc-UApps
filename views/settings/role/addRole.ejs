<% include ./partials/navbar %>
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <h1>
        Setting
        <small>Add Role User</small>
      </h1>
      <ol class="breadcrumb">
        <li><a href="/welcome" data-toggle="tooltip" title="dashboard"><i class="fa fa-dashboard"></i> Home</a></li>
        <li><a href="/settings/role" data-toggle="tooltip" title="Role User">Role User</a></li>
        <li class="active">Add Role User</li>
      </ol>
      <br>
      <% if(error && error.length > 0) { %>
      <% error.forEach(function(errors){ %>
        <div class="alert alert-danger alert-dismissable fade in">
          <button type="button" class="close" data-dismiss="alert">
          <span aria-hidden="true">&times;</span>
          <span class="sr-only">Close</span>
        </button><p><%= errors.message %><%= errors.msg %>
        </span></div>
        <%});%>
        <%}%>
      <div class="box box-default">
        <div class="box-header">
          <i class="fa fa-users"></i>
          <h3 class="box-title">ADD ROLE USER</h3>
          <small>* (must be filled)</small>
          <!-- /. tools -->
        </div>
        <div class="box-body">
          <form action="/settings/add-role" method="post">
            <div class="form-group">
              <input type="text" class="form-control" name=code[0] placeholder="Code *"required>
            </div>

            <div class="form-group">
              <div class="box box-info">
                <div class="box-body">
                  <div class="box-header">
                    <h3 class="box-title">ADD ROLE PERMISSIONS</h3>
                  </div>
                  <div class="box-body no-padding">
                    <table class="table table-striped">
                      <tr>
                        <th>Code</th>
                        <th>GET</th>
                        <th>POST</th>
                        <th>PUT</th>
                        <th>DELETE</th>
                        <% dataRole.forEach(function(newRole){%>
                          <%newRole.permissions.forEach(function(newRolePer,i){ %>
                          </tr>
                          <tr>
                            <td>
                              <input type="checkbox" name=resource[<%=i%>]  placeholder="Code" value="<%= newRolePer.resource %>">
                              <label for=code><%= newRolePer.resource %></label>
                            </td>
                            <%newRolePer.methods.forEach(function(newRolePerMethod,k){ %>
                            <td>
                              <input type="checkbox" name=methods[<%=newRolePer.resource%>]http[<%=k%>] value="<%= newRolePerMethod.http %>">
                            </td>
                            <%});%>
                          <%});%>
                        <%});%>
                    </table>
                  </div>
                </div>
              </div>
            </div>
            <div class="form-group">
              <input type="text" class="form-control" name="description" placeholder="Description *" required>
            </div>
            <div class="box-footer clearfix">
              <button class="pull-right btn btn-default">Save
                <i class="fa fa-arrow-circle-right"></i></button>
            </div>
          </form>
        </div>
      </div>
    </section>
  </div>

  <% include ./partials/footer %>
